{"version":3,"file":"index.cjs.js","sources":["../src/options.ts","../src/constants.ts","../src/cssHandler.ts","../src/queries.ts","../src/script.ts","../src/index.ts","../src/jsHandler.ts"],"sourcesContent":["import { Options, HandleMobileOptions, TransformPixelsOptions } from './types'\n\nexport const optionDefaults: Options = {\n  appEntry: undefined,\n  handleMobile: true,\n  transformPixels: false\n}\n\nexport const handleMobileDefaults: HandleMobileOptions = {\n  ignoreSelectors: [],\n  centralizeText: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p'],\n  breakpoint: '480px'\n}\n\nexport const transformPixelsDefault: TransformPixelsOptions = {\n  ignoreAttributes: [],\n  ignoreSelectors: []\n}","export const htmlTagBaseFontSize = 16\nexport const ignoreResponsiveAppClass = 'ignore-responsive-app'\nexport const indexHtmlFile = '/index.html'\nexport const appEntryPoints = [indexHtmlFile, '/app.js', '/main.js', 'src/index.js']","import MagicString from 'magic-string'\nimport { Options, TransformPixelsOptions, HandleMobileOptions } from './types'\nimport { htmlTagBaseFontSize, ignoreResponsiveAppClass } from './constants'\nimport { handleMobileDefaults, transformPixelsDefault } from './options'\n\nconst pxToRemRegExp = /(\\d+)px/g\nconst cssSelectorRegExp = /([.#\\w\\-\\s,:]+)\\s*\\{([^}]+?)\\}/gs\nconst propRegex = /([\\w-]+)\\s*:\\s*([^}]+)/g\n\nfunction getRemValue(value: number) {\n  return (value / htmlTagBaseFontSize).toFixed(4).replace(/[.,]0+$/, \"\")\n}\n\nfunction getPropertyRemValue(value: string) {\n  return value.replace(/[0-9]+px/g, (match: string) => {\n    return getRemValue(Number(match.replace('px', ''))) + 'rem'\n  })\n}\n\nfunction transformPixels(code: string, options: TransformPixelsOptions) {\n  const cssMap = new Map()\n  let match\n\n  while ((match = cssSelectorRegExp.exec(code)) !== null) {\n    const selector = match[1].trim()\n    const properties = match[2].trim()\n\n    if (options.ignoreSelectors.some(i => selector.includes(i))) {\n      continue\n    }\n\n    const pxProperties = []\n    let propMatch\n\n    while ((propMatch = propRegex.exec(properties)) !== null) {\n      const key = propMatch[1].trim()\n      const value = propMatch[2].trim()\n\n      if (value.includes('px') && !options.ignoreAttributes.includes(key)) {\n        pxProperties.push({ key, value })\n      }\n    }\n\n    if (pxProperties.length > 0) {\n      cssMap.set(selector, pxProperties)\n    }\n  }\n\n  let transformationDefinitions = ''\n\n  if (cssMap.size > 0) {\n    cssMap.forEach((properties, key) => {\n      transformationDefinitions += `${key}:not(.${ignoreResponsiveAppClass}){`\n      properties.forEach((prop: { key: string, value: string }, index: number) => {\n        const isLast = index === properties.length - 1\n        transformationDefinitions += `${prop.key}:${getPropertyRemValue(prop.value)}${isLast ? '' : ''}`\n      })\n      transformationDefinitions += '}'\n    })\n  }\n\n  return transformationDefinitions\n}\n\nfunction handleMobile(code: string, options: HandleMobileOptions) {\n  const selectors = new Set()\n  let match\n\n  while ((match = cssSelectorRegExp.exec(code)) !== null) {\n    const selector = match[1].trim()\n    const properties = match[2].trim()\n    if (options.ignoreSelectors.some(i => selector.includes(i))) {\n      continue\n    }\n\n    let hasDisplayFlex = false\n    let hasFlexDirectionColumn = false\n\n    let propMatch\n\n    while ((propMatch = propRegex.exec(properties)) !== null) {\n      const key = propMatch[1].trim()\n      const value = propMatch[2].trim()\n\n      if (key === 'display' && value === 'flex') {\n        hasDisplayFlex = true\n      }\n      if (key === 'flex-direction' && value === 'column') {\n        hasFlexDirectionColumn = true\n      }\n    }\n    if (hasDisplayFlex && !hasFlexDirectionColumn) {\n      selectors.add(selector)\n    }\n  }\n\n  let transformationDefinitions = ''\n\n  if (selectors.size > 0) {\n    transformationDefinitions = `@media only screen and (max-width: ${options.breakpoint}) and (orientation: portrait){`\n    selectors.forEach((key) => {\n      transformationDefinitions += `${key}:not(.${ignoreResponsiveAppClass}){flex-direction: column; margin-left: 0; margin-right: 0}`\n    })\n    transformationDefinitions += '}'\n  }\n\n  return transformationDefinitions\n}\n\nfunction findInsertionIndex(str: string) {\n  const openingQuoteStatements = [\n    'const __vite__css = \"',\n    'export default \"'\n  ]\n  let closingQuoteIndex = -1\n  let searchString\n  let startIndex\n\n  do {\n    searchString = openingQuoteStatements.pop()\n    startIndex = searchString ? str.indexOf(searchString) : -1\n    if (searchString && startIndex !== -1) {\n      const openQuoteIndex = startIndex + searchString.length - 1\n      closingQuoteIndex = str.indexOf('\"', openQuoteIndex + 1)\n    }\n  } while (searchString && startIndex === -1)\n\n  return closingQuoteIndex\n}\n\nexport default (options: Options, code: string, id: string) => {\n  const transformPixelsParams = {\n    ...transformPixelsDefault,\n    ...(typeof options.transformPixels === 'object' ? options.transformPixels : {})\n  }\n  const handleMobileParams = {\n    ...handleMobileDefaults,\n    ...(typeof options.handleMobile === 'object' ? options.handleMobile : {})\n  }\n\n  let transformedCode = ''\n  transformedCode += options.transformPixels ? transformPixels(code, transformPixelsParams) : ''\n  transformedCode += options.handleMobile ? handleMobile(code, handleMobileParams) : ''\n\n  if (transformedCode) {\n    const magicString = new MagicString(code)\n    const index = findInsertionIndex(code)\n    if (index !== -1) {\n      magicString.prependLeft(index, transformedCode)\n    } else if (code.charAt(code.length - 1) === '\"') {\n      magicString.replace(/\"$/, `${transformedCode}\"`)\n    } else {\n      magicString.append(transformedCode)\n    }\n\n    return {\n      code: magicString.toString(),\n      map: magicString.generateMap({\n        source: id,\n        file: id,\n        includeContent: true\n      })\n    }\n  }\n\n  return null\n}","export default `\n:root {\n  --v-rem: 32;\n}\n@media (orientation: landscape) and (max-width: 2480px), (orientation: landscape) and (max-height: 1395px) {\n  :root {\n    --v-rem: 31;\n }\n}\n@media (orientation: landscape) and (max-width: 2400px), (orientation: landscape) and (max-height: 1350px) {\n  :root {\n    --v-rem: 30;\n }\n}\n@media (orientation: landscape) and (max-width: 2320px), (orientation: landscape) and (max-height: 1305px) {\n  :root {\n    --v-rem: 29;\n }\n}\n@media (orientation: landscape) and (max-width: 2240px), (orientation: landscape) and (max-height: 1260px) {\n  :root {\n    --v-rem: 28;\n }\n}\n@media (orientation: landscape) and (max-width: 2160px), (orientation: landscape) and (max-height: 1215px) {\n  :root {\n    --v-rem: 27;\n }\n}\n@media (orientation: landscape) and (max-width: 2080px), (orientation: landscape) and (max-height: 1170px) {\n  :root {\n    --v-rem: 26;\n }\n}\n@media (orientation: landscape) and (max-width: 2000px), (orientation: landscape) and (max-height: 1125px) {\n  :root {\n    --v-rem: 25;\n }\n}\n@media (orientation: landscape) and (max-width: 1920px), (orientation: landscape) and (max-height: 1080px) {\n  :root {\n    --v-rem: 24;\n }\n}\n@media (orientation: landscape) and (max-width: 1840px), (orientation: landscape) and (max-height: 1035px) {\n  :root {\n    --v-rem: 23;\n }\n}\n@media (orientation: landscape) and (max-width: 1760px), (orientation: landscape) and (max-height: 990px) {\n  :root {\n    --v-rem: 22;\n }\n}\n@media (orientation: landscape) and (max-width: 1680px), (orientation: landscape) and (max-height: 945px) {\n  :root {\n    --v-rem: 21;\n }\n}\n@media (orientation: landscape) and (max-width: 1600px), (orientation: landscape) and (max-height: 900px) {\n  :root {\n    --v-rem: 20;\n }\n}\n@media (orientation: landscape) and (max-width: 1520px), (orientation: landscape) and (max-height: 855px) {\n  :root {\n    --v-rem: 19;\n }\n}\n@media (orientation: landscape) and (max-width: 1440px), (orientation: landscape) and (max-height: 810px) {\n  :root {\n    --v-rem: 18;\n }\n}\n@media (orientation: landscape) and (max-width: 1360px), (orientation: landscape) and (max-height: 765px) {\n  :root {\n    --v-rem: 17;\n }\n}\n@media (orientation: landscape) and (max-width: 1280px), (orientation: landscape) and (max-height: 720px) {\n  :root {\n    --v-rem: 16;\n }\n}\n@media (orientation: landscape) and (max-width: 1200px), (orientation: landscape) and (max-height: 675px) {\n  :root {\n    --v-rem: 15;\n }\n}\n@media (orientation: landscape) and (max-width: 1120px), (orientation: landscape) and (max-height: 630px) {\n  :root {\n    --v-rem: 14;\n }\n}\n@media (orientation: landscape) and (max-width: 1040px), (orientation: landscape) and (max-height: 585px) {\n  :root {\n    --v-rem: 13;\n }\n}\n@media (orientation: landscape) and (max-width: 960px), (orientation: landscape) and (max-height: 540px) {\n  :root {\n    --v-rem: 12;\n }\n}\n@media (orientation: landscape) and (max-width: 880px), (orientation: landscape) and (max-height: 495px) {\n  :root {\n    --v-rem: 11;\n }\n}\n@media (orientation: landscape) and (max-width: 800px), (orientation: landscape) and (max-height: 450px) {\n  :root {\n    --v-rem: 10;\n }\n}\n@media (orientation: landscape) and (max-width: 720px), (orientation: landscape) and (max-height: 405px) {\n  :root {\n    --v-rem: 9;\n }\n}\n@media (orientation: landscape) and (max-width: 640px), (orientation: landscape) and (max-height: 360px) {\n  :root {\n    --v-rem: 8;\n }\n}\n@media (orientation: landscape) and (max-width: 560px), (orientation: landscape) and (max-height: 315px) {\n  :root {\n    --v-rem: 7;\n }\n}\n@media (orientation: landscape) and (max-width: 480px), (orientation: landscape) and (max-height: 270px) {\n  :root {\n    --v-rem: 6;\n }\n}\n@media (orientation: landscape) and (max-width: 400px), (orientation: landscape) and (max-height: 225px) {\n  :root {\n    --v-rem: 5;\n }\n}\n@media (orientation: landscape) and (max-width: 320px), (orientation: landscape) and (max-height: 180px) {\n  :root {\n    --v-rem: 4;\n }\n}\n@media (orientation: landscape) and (max-width: 240px), (orientation: landscape) and (max-height: 135px) {\n  :root {\n    --v-rem: 3;\n }\n}\n@media (orientation: landscape) and (max-width: 160px), (orientation: landscape) and (max-height: 90px) {\n  :root {\n    --v-rem: 2;\n }\n}\n@media (orientation: landscape) and (max-width: 80px), (orientation: landscape) and (max-height: 45px) {\n  :root {\n    --v-rem: 1;\n }\n}\n@media (orientation: portrait) and (max-width: 1395px), (orientation: portrait) and (max-height: 2480px) {\n  :root {\n    --v-rem: 31;\n }\n}\n@media (orientation: portrait) and (max-width: 1350px), (orientation: portrait) and (max-height: 2400px) {\n  :root {\n    --v-rem: 30;\n }\n}\n@media (orientation: portrait) and (max-width: 1305px), (orientation: portrait) and (max-height: 2320px) {\n  :root {\n    --v-rem: 29;\n }\n}\n@media (orientation: portrait) and (max-width: 1260px), (orientation: portrait) and (max-height: 2240px) {\n  :root {\n    --v-rem: 28;\n }\n}\n@media (orientation: portrait) and (max-width: 1215px), (orientation: portrait) and (max-height: 2160px) {\n  :root {\n    --v-rem: 27;\n }\n}\n@media (orientation: portrait) and (max-width: 1170px), (orientation: portrait) and (max-height: 2080px) {\n  :root {\n    --v-rem: 26;\n }\n}\n@media (orientation: portrait) and (max-width: 1125px), (orientation: portrait) and (max-height: 2000px) {\n  :root {\n    --v-rem: 25;\n }\n}\n@media (orientation: portrait) and (max-width: 1080px), (orientation: portrait) and (max-height: 1920px) {\n  :root {\n    --v-rem: 24;\n }\n}\n@media (orientation: portrait) and (max-width: 1035px), (orientation: portrait) and (max-height: 1840px) {\n  :root {\n    --v-rem: 23;\n }\n}\n@media (orientation: portrait) and (max-width: 990px), (orientation: portrait) and (max-height: 1760px) {\n  :root {\n    --v-rem: 22;\n }\n}\n@media (orientation: portrait) and (max-width: 945px), (orientation: portrait) and (max-height: 1680px) {\n  :root {\n    --v-rem: 21;\n }\n}\n@media (orientation: portrait) and (max-width: 900px), (orientation: portrait) and (max-height: 1600px) {\n  :root {\n    --v-rem: 20;\n }\n}\n@media (orientation: portrait) and (max-width: 855px), (orientation: portrait) and (max-height: 1520px) {\n  :root {\n    --v-rem: 19;\n }\n}\n@media (orientation: portrait) and (max-width: 810px), (orientation: portrait) and (max-height: 1440px) {\n  :root {\n    --v-rem: 18;\n }\n}\n@media (orientation: portrait) and (max-width: 765px), (orientation: portrait) and (max-height: 1360px) {\n  :root {\n    --v-rem: 17;\n }\n}\n@media (orientation: portrait) and (max-width: 720px), (orientation: portrait) and (max-height: 1280px) {\n  :root {\n    --v-rem: 16;\n }\n}\n@media (orientation: portrait) and (max-width: 675px), (orientation: portrait) and (max-height: 1200px) {\n  :root {\n    --v-rem: 15;\n }\n}\n@media (orientation: portrait) and (max-width: 630px), (orientation: portrait) and (max-height: 1120px) {\n  :root {\n    --v-rem: 14;\n }\n}\n@media (orientation: portrait) and (max-width: 585px), (orientation: portrait) and (max-height: 1040px) {\n  :root {\n    --v-rem: 13;\n }\n}\n@media (orientation: portrait) and (max-width: 540px), (orientation: portrait) and (max-height: 960px) {\n  :root {\n    --v-rem: 12;\n }\n}\n@media (orientation: portrait) and (max-width: 495px), (orientation: portrait) and (max-height: 880px) {\n  :root {\n    --v-rem: 11;\n }\n}\n@media (orientation: portrait) and (max-width: 450px), (orientation: portrait) and (max-height: 800px) {\n  :root {\n    --v-rem: 10;\n }\n}\n@media (orientation: portrait) and (max-width: 405px), (orientation: portrait) and (max-height: 720px) {\n  :root {\n    --v-rem: 9;\n }\n}\n@media (orientation: portrait) and (max-width: 360px), (orientation: portrait) and (max-height: 640px) {\n  :root {\n    --v-rem: 8;\n }\n}\n@media (orientation: portrait) and (max-width: 315px), (orientation: portrait) and (max-height: 560px) {\n  :root {\n    --v-rem: 7;\n }\n}\n@media (orientation: portrait) and (max-width: 270px), (orientation: portrait) and (max-height: 480px) {\n  :root {\n    --v-rem: 6;\n }\n}\n@media (orientation: portrait) and (max-width: 225px), (orientation: portrait) and (max-height: 400px) {\n  :root {\n    --v-rem: 5;\n }\n}\n@media (orientation: portrait) and (max-width: 180px), (orientation: portrait) and (max-height: 320px) {\n  :root {\n    --v-rem: 4;\n }\n}\n@media (orientation: portrait) and (max-width: 135px), (orientation: portrait) and (max-height: 240px) {\n  :root {\n    --v-rem: 3;\n }\n}\n@media (orientation: portrait) and (max-width: 90px), (orientation: portrait) and (max-height: 160px) {\n  :root {\n    --v-rem: 2;\n }\n}\n@media (orientation: portrait) and (max-width: 45px), (orientation: portrait) and (max-height: 80px) {\n  :root {\n    --v-rem: 1;\n }\n}\n`","import queries from './queries'\n\nexport default () => {\n  return `\n    if (typeof window !== 'undefined') {\n      const baseFontSize = 16\n    \n      const updateHtmlFontSize = function() {\n        const htmlElement = document.querySelector('html');\n        htmlElement.style.removeProperty('font-size');\n        const browserFontSize = window.getComputedStyle(htmlElement).getPropertyValue('font-size');\n\n        const browserDifference = Number(browserFontSize.replace('px', '')) - baseFontSize;\n\n        const vRem = window.getComputedStyle(document.documentElement).getPropertyValue('--v-rem');\n        const fontSize = Number(vRem) + Number(browserDifference)\n        htmlElement.style.setProperty('font-size', fontSize + 'px')\n      }\n\n      const addVirtualRemQueries = function() {\n        const style = document.createElement('style')\n        style.setAttribute('type', 'text/css')\n        style.setAttribute('data-magic-responsive', 'true')\n        style.textContent = \\\"${queries.replace(/\\n/g, '')}\\\"\n        document.head.appendChild(style)\n      }\n\n      const initResponsive = function() {\n        window.addEventListener('resize', updateHtmlFontSize)\n        addVirtualRemQueries()\n        updateHtmlFontSize()\n      }\n\n      if (window.document.readyState !== 'loading') {\n        initResponsive();\n      } else {\n        window.document.addEventListener('DOMContentLoaded', function() {\n          initResponsive();\n        });\n      }\n    }`\n}","import { Options } from './types'\nimport { optionDefaults } from './options'\nimport { indexHtmlFile, appEntryPoints } from './constants'\nimport handleCss from './cssHandler'\nimport handleJs from './jsHandler'\n\nlet hasAddedScript = false\n\nexport default function(data?: Options) {\n  const options: Options = {\n    ...optionDefaults,\n    ...(data || {})\n  }\n\n  return {\n    name: 'responsive-app-rollup-plugin',\n\n    transform: {\n      order: 'post',\n      handler(code: string, id: string) {\n        if ((options.handleMobile || options.transformPixels) && id.includes('.css')) {\n          return handleCss(options, code, id)\n        }\n\n        const isOptionEntryPoint = options.appEntry && id.includes(options.appEntry)\n        const isDefaultEntryPoint = !options.appEntry && appEntryPoints.some(i => id.includes(i)) && !id.includes('/server')\n\n        if (!hasAddedScript && (isOptionEntryPoint || isDefaultEntryPoint)) {\n          hasAddedScript = true\n          return handleJs(code, id)\n        }\n\n        return null\n      },\n    },\n  }\n}","import MagicString from 'magic-string'\nimport { indexHtmlFile } from './constants'\nimport getResponsiveScript from './script'\n\nexport default (code: string, id: string) => {\n  const magicString = new MagicString(code)\n  const isHtmlFile = id.includes(indexHtmlFile)\n  if (isHtmlFile) {\n    const index = code.indexOf('</body>')\n    magicString.prependLeft(index, `<script>${getResponsiveScript()}</script>`)\n  } else {\n    magicString.append(`\\n\\n(function() {\\n${getResponsiveScript()}\\n}())`)\n  }\n\n  return {\n    code: magicString.toString(),\n    map: magicString.generateMap({\n      source: id,\n      file: id,\n      includeContent: true\n    })\n  }\n}"],"names":["optionDefaults","appEntry","undefined","handleMobile","transformPixels","handleMobileDefaults","ignoreSelectors","centralizeText","breakpoint","transformPixelsDefault","ignoreAttributes","ignoreResponsiveAppClass","indexHtmlFile","appEntryPoints","cssSelectorRegExp","propRegex","code","options","cssMap","Map","match","exec","selector","trim","properties","some","i","includes","pxProperties","propMatch","key","value","push","length","set","transformationDefinitions","size","forEach","prop","index","replace","toFixed","getRemValue","Number","handleCss","id","transformPixelsParams","handleMobileParams","transformedCode","selectors","Set","hasDisplayFlex","hasFlexDirectionColumn","add","magicString","MagicString","str","openingQuoteStatements","searchString","startIndex","closingQuoteIndex","pop","indexOf","openQuoteIndex","findInsertionIndex","prependLeft","charAt","append","toString","map","generateMap","source","file","includeContent","queries","getResponsiveScript","hasAddedScript","data","name","transform","order","handler","isOptionEntryPoint","isDefaultEntryPoint","handleJs"],"mappings":"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"}